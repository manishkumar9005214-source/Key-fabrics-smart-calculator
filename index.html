<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FARDIP THAKRE ‚Äì All-in-One Calculator Suite</title>
    <meta name="description" content="Advanced calculators: Fabric, Foam, SIP, EMI, Age, BMI, Unit Converter, Step-up SIP, and more. Created by FARDIP THAKRE.">
    <meta name="keywords" content="fabric calculator, foam density, sip calculator, bmi calculator, unit converter">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://fardipthakre.github.io/Key-fabrics-smart-calculator/">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-title" content="FARDIP THAKRE">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.12.0/math.min.js"></script>
    <style>
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        :root{
            --bg:#0a0e1a;--surface:#111827;--card:#151d2e;--card-alt:#1a2540;
            --input:#0c1220;--border:#253352;--border-light:#2e4068;
            --accent:#3b82f6;--accent-glow:rgba(59,130,246,.35);--accent-dim:#1e3a8a;
            --gold:#f59e0b;--gold-dim:#92400e;
            --teal:#14b8a6;--teal-dim:#0f766e;
            --rose:#f43f5e;--rose-dim:#9f1239;
            --text:#e2e8f0;--text-sec:#94a3b8;--text-dim:#64748b;
            --white:#ffffff;--shadow:rgba(0,0,0,.5);
            --success:#22c55e;--error:#ef4444;
            --radius:18px;--radius-sm:12px;--radius-btn:14px;
        }
        html{font-size:16px}
        body{
            background:var(--bg);min-height:100vh;min-height:100dvh;
            font-family:'Inter',system-ui,sans-serif;color:var(--text);
            display:flex;flex-direction:column;align-items:center;
            padding:0 0 80px 0;overflow-x:hidden;
        }

        /* Header */
        .header{
            width:100%;padding:18px 20px 14px;
            background:linear-gradient(180deg,rgba(17,24,39,.98) 0%,rgba(10,14,26,.95) 100%);
            text-align:center;position:sticky;top:0;z-index:100;
            border-bottom:1px solid var(--border);
            backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
        }
        .brand{
            display: flex;
            align-items: center;
            gap: 8px;
            font-size:1.6rem;
            font-weight:800;
            letter-spacing:2px;
            color:var(--gold);
            white-space: nowrap; /* force single line */
        }
        .brand span{
            color:var(--text);
            font-weight:500;
            font-size:1rem;
            letter-spacing:0;
            margin-left:5px;
        }
        .tagline{font-size:.75rem;color:var(--text-dim);margin-top:2px;letter-spacing:.5px}
        .menu-btn {
            background: none; border: none; color: var(--text); font-size: 1.8rem;
            cursor: pointer; padding: 0 10px; line-height: 1; transition: 0.2s;
        }
        .menu-btn:active { opacity: 0.7; }
        @media (max-width: 380px) {
            .brand { font-size: 1.3rem; }
            .brand span { font-size: 0.8rem; }
        }

        /* Side Menu */
        .side-menu {
            position: fixed; top: 0; right: -300px; width: 280px; height: 100vh;
            background: var(--surface); border-left: 1px solid var(--border);
            box-shadow: -5px 0 20px var(--shadow); z-index: 300;
            transition: right 0.3s ease; display: flex; flex-direction: column;
            padding: 20px 0; overflow-y: auto;
        }
        .side-menu.open { right: 0; }
        .side-menu-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px 20px; border-bottom: 1px solid var(--border);
            font-weight: 700; color: var(--gold);
        }
        .close-menu {
            background: none; border: none; color: var(--text); font-size: 2rem;
            cursor: pointer; line-height: 1;
        }
        .side-menu-items { padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .menu-item {
            background: var(--card); border: 1px solid var(--border); color: var(--text);
            padding: 14px 16px; border-radius: var(--radius-sm); font-size: 1rem;
            font-weight: 600; text-align: left; cursor: pointer; transition: 0.15s;
            width: 100%; font-family: inherit;
        }
        .menu-item:active { background: var(--accent-dim); }
        .menu-divider { height: 1px; background: var(--border); margin: 10px 0; }
        .menu-subtitle { color: var(--text-sec); font-size: 0.85rem; font-weight: 600; margin-left: 5px; }
        .theme-options, .sound-options { display: flex; gap: 8px; flex-wrap: wrap; margin: 5px 0; }
        .theme-btn, .sound-select {
            background: var(--card-alt); border: 1px solid var(--border); color: var(--text);
            padding: 8px 12px; border-radius: 20px; font-size: 0.9rem; cursor: pointer;
            transition: 0.15s; font-family: inherit;
        }
        .theme-btn.active-theme { background: var(--accent); color: white; border-color: var(--accent); }
        .sound-select { width: 100%; padding: 10px; border-radius: var(--radius-sm); background: var(--input); }

        /* Bottom Tab Bar */
        .tab-bar{
            position:fixed;bottom:0;left:0;right:0;
            display:flex;justify-content:space-around;
            background:rgba(17,24,39,.96);
            border-top:1px solid var(--border);
            padding:6px 0 env(safe-area-inset-bottom,8px);
            backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
            z-index:200;
        }
        .tab-item{
            display:flex;flex-direction:column;align-items:center;gap:2px;
            padding:6px 8px;border-radius:10px;cursor:pointer;
            transition:.15s;flex:1;max-width:90px;
            background:transparent;border:none;color:var(--text-dim);font-family:inherit;
        }
        .tab-item.active{color:var(--accent)}
        .tab-item.active .tab-icon{background:var(--accent-glow);color:var(--white)}
        .tab-icon{
            width:36px;height:28px;border-radius:14px;
            display:flex;align-items:center;justify-content:center;
            font-size:1.1rem;transition:.2s;
        }
        .tab-label{font-size:.65rem;font-weight:600;letter-spacing:.3px}

        /* Main Content */
        .main{width:100%;max-width:480px;padding:16px}
        .page{display:none}
        .page.active{display:block;animation:fadeUp .25s ease}
        @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

        /* Calculator */
        .calc-display{ background:var(--input);border-radius:var(--radius); padding:20px 18px;margin-bottom:14px; border:1px solid var(--border); min-height:110px;display:flex;flex-direction:column;justify-content:flex-end; }
        .calc-expr{ font-size:1.05rem;color:var(--text-sec);text-align:right; min-height:24px;word-break:break-all;line-height:1.4; }
        .calc-result{ font-size:2.6rem;font-weight:700;color:var(--text); text-align:right;word-break:break-all; text-shadow:0 0 20px var(--accent-glow); line-height:1.2;margin-top:4px; }
        .calc-grid{ display:grid;grid-template-columns:repeat(4,1fr);gap:10px; }
        .calc-btn{ background:var(--card);border:1px solid var(--border); color:var(--text);font-size:1.25rem;font-weight:600; padding:16px 0;border-radius:var(--radius-btn);cursor:pointer; transition:.1s;text-align:center;user-select:none; font-family:'Inter',sans-serif; box-shadow:0 4px 0 rgba(0,0,0,.3); position:relative;overflow:hidden; }
        .calc-btn:active{transform:translateY(3px);box-shadow:0 1px 0 rgba(0,0,0,.3)}
        .calc-btn.fn{background:var(--card-alt);color:var(--gold);font-size:1rem}
        .calc-btn.op{background:#1e3050;color:#fb923c}
        .calc-btn.eq{background:var(--accent);color:var(--white);font-weight:700}
        .calc-btn.ac{background:var(--rose-dim);color:var(--white)}
        .calc-btn.span2{grid-column:span 2}
        .calc-btn.sci{font-size:.82rem;padding:12px 0}
        .sci-toggle{ display:flex;gap:8px;margin-bottom:12px; }
        .sci-toggle button{ flex:1;padding:10px;border-radius:var(--radius-sm); border:1px solid var(--border);cursor:pointer; font-family:inherit;font-size:.85rem;font-weight:600; transition:.15s; }
        .sci-toggle .basic-btn{background:var(--accent-dim);color:var(--white);border-color:var(--accent)}
        .sci-toggle .sci-btn{background:var(--card);color:var(--text-sec);border-color:var(--border)}
        .sci-toggle .basic-btn.inactive{background:var(--card);color:var(--text-sec);border-color:var(--border)}
        .sci-toggle .sci-btn.active-mode{background:var(--accent-dim);color:var(--white);border-color:var(--accent)}
        .sci-pad{ display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:12px; }

        /* Shared Form Elements */
        .form-card{ background:var(--card);border-radius:var(--radius); padding:20px;border:1px solid var(--border);margin-bottom:16px; }
        .form-title{ font-size:1.05rem;font-weight:700;margin-bottom:14px; display:flex;align-items:center;gap:8px; }
        .form-title .icon{ width:32px;height:32px;border-radius:10px; display:flex;align-items:center;justify-content:center; font-size:.95rem; }
        .form-label{color:var(--text-sec);font-size:.82rem;margin:12px 0 6px;font-weight:500}
        .form-input{ width:100%;padding:13px 16px; background:var(--input);border:1px solid var(--border); color:var(--white);border-radius:var(--radius-sm); font-size:1rem;font-family:inherit;outline:none; transition:.2s; }
        .form-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}
        .form-select{ width:100%;padding:13px 16px; background:var(--input);border:1px solid var(--border); color:var(--white);border-radius:var(--radius-sm); font-size:1rem;font-family:inherit;outline:none; appearance:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E"); background-repeat:no-repeat;background-position:right 14px center; cursor:pointer; }
        .form-select:focus{border-color:var(--accent)}
        .form-btn{ width:100%;padding:14px;border:none;border-radius:var(--radius-btn); font-size:1rem;font-weight:700;cursor:pointer; font-family:inherit;transition:.15s;margin-top:14px; box-shadow:0 4px 0 rgba(0,0,0,.25); }
        .form-btn:active{transform:translateY(3px);box-shadow:0 1px 0 rgba(0,0,0,.25)}
        .form-btn.primary{background:var(--accent);color:var(--white)}
        .form-btn.gold{background:var(--gold);color:#1a1a2e}
        .form-btn.teal{background:var(--teal);color:var(--white)}
        .form-row{display:flex;gap:10px;align-items:flex-end}
        .form-row > *{flex:1}

        /* Result Box */
        .result-box{ background:var(--input);border-radius:var(--radius-sm); padding:16px;margin-top:14px; border-left:4px solid var(--accent); min-height:50px; }
        .result-box .result-label{font-size:.78rem;color:var(--text-dim);margin-bottom:6px;font-weight:500}
        .result-box .result-val{font-size:1.5rem;font-weight:700;color:var(--success);line-height:1.3}
        .result-box .result-detail{font-size:.9rem;color:var(--text-sec);margin-top:6px;line-height:1.5}
        .result-box.gold-border{border-left-color:var(--gold)}
        .result-box.teal-border{border-left-color:var(--teal)}
        .result-box.rose-border{border-left-color:var(--rose)}

        /* Unit Pills */
        .unit-pills{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:14px}
        .unit-pill{ padding:8px 14px;border-radius:20px; background:var(--card-alt);border:1px solid var(--border); color:var(--text-sec);font-size:.8rem;font-weight:600; cursor:pointer;transition:.15s;font-family:inherit; }
        .unit-pill.active{background:var(--accent-dim);color:var(--white);border-color:var(--accent)}

        /* Fabric Table */
        .fabric-table{ width:100%;border-collapse:collapse;margin-top:14px; font-size:.82rem; }
        .fabric-table th{ background:var(--card-alt);color:var(--gold); padding:10px 8px;text-align:left;font-weight:600; border-bottom:2px solid var(--border); position:sticky;top:0; }
        .fabric-table td{ padding:10px 8px;border-bottom:1px solid rgba(37,51,82,.5); color:var(--text-sec); }
        .fabric-table tr:hover td{background:rgba(59,130,246,.06)}
        .search-box{ position:relative;margin-bottom:14px; }
        .search-box input{ width:100%;padding:12px 16px 12px 40px; background:var(--input);border:1px solid var(--border); color:var(--white);border-radius:var(--radius-sm); font-size:.95rem;font-family:inherit;outline:none; }
        .search-box input:focus{border-color:var(--accent)}
        .search-box .search-icon{ position:absolute;left:14px;top:50%;transform:translateY(-50%); color:var(--text-dim);font-size:.9rem; }

        /* Modal */
        .modal {
            display: none; position: fixed; z-index: 400; left: 0; top: 0;
            width: 100%; height: 100%; background-color: rgba(0,0,0,0.7);
            align-items: center; justify-content: center;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: var(--surface); padding: 30px; border-radius: var(--radius);
            border: 1px solid var(--border); max-width: 350px; width: 90%;
            text-align: center; position: relative;
        }
        .close-modal {
            position: absolute; top: 10px; right: 15px; font-size: 2rem;
            cursor: pointer; color: var(--text-dim);
        }
        .modal-content h3 { margin-bottom: 20px; color: var(--gold); }
        .modal-content p { margin: 10px 0; color: var(--text-sec); }
        .modal-content a { color: var(--accent); text-decoration: none; }

        /* History Page */
        .history-page-list {
            background: var(--input); border-radius: var(--radius-sm);
            padding: 10px; max-height: 300px; overflow-y: auto;
            margin-bottom: 15px;
        }
        .history-page-item {
            display: flex; justify-content: space-between;
            padding: 8px; border-bottom: 1px solid var(--border);
            color: var(--text-sec);
        }
        .history-page-export {
            display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;
        }

        /* Responsive */
        @media(max-width:380px){
            .calc-btn{padding:13px 0;font-size:1.1rem}
            .calc-result{font-size:2.2rem}
        }
    </style>
</head>
<body>

<!-- HEADER with Hamburger (Brand: FARDIP THAKRE single line) -->
<header class="header">
    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
        <div class="brand">
            <img src="icon-192.png" alt="logo" style="height: 40px; width: 40px; border-radius: 6px; vertical-align: middle;">
            FARDIP THAKRE<span>Tools</span>
        </div>
        <button class="menu-btn" id="menuToggle" aria-label="Menu">‚ò∞</button>
    </div>
    <div class="tagline">Smart Business Calculator & Utilities</div>
</header>

<!-- SIDE MENU (with History option) -->
<div class="side-menu" id="sideMenu">
    <div class="side-menu-header">
        <span>MENU</span>
        <button class="close-menu" id="closeMenu">&times;</button>
    </div>
    <div class="side-menu-items">
        <button class="menu-item" data-page="history">üìú History</button>
        <button class="menu-item" data-page="sip">üìà SIP Calculator</button>
        <button class="menu-item" data-page="stepup-sip">üìä Step-up SIP</button>
        <button class="menu-item" data-page="emi">üí∞ EMI Calculator</button>
        <button class="menu-item" data-page="bmi">‚öñÔ∏è BMI Calculator</button>
        <button class="menu-item" data-page="age">üìÖ Age Calculator</button>
        <div class="menu-divider"></div>
        <div class="menu-subtitle">Theme</div>
        <div class="theme-options">
            <button class="theme-btn" data-theme="dark">üåô Dark</button>
            <button class="theme-btn" data-theme="light">‚òÄÔ∏è Light</button>
            <button class="theme-btn" data-theme="original">üî∑ Original</button>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-subtitle">Click Sound</div>
        <div class="sound-options">
            <select id="soundSelect" class="sound-select">
                <option value="tick">Tick</option>
                <option value="click">Click</option>
                <option value="beep">Beep</option>
                <option value="silent">Silent</option>
            </select>
        </div>
        <div class="menu-divider"></div>
        <button class="menu-item" id="contactBtn">üìû Contact Us</button>
        <button class="menu-item" id="rateBtn">‚≠ê Rate this App</button>
        <button class="menu-item" id="shareBtn">üì§ Share App</button>
    </div>
</div>

<!-- MAIN CONTENT -->
<div class="main">

    <!-- ========== CALCULATOR PAGE ========== -->
    <div class="page active" id="page-calc">
        <div class="calc-display">
            <div class="calc-expr" id="calcExpr">0</div>
            <div class="calc-result" id="calcResult">0</div>
        </div>
        <div class="sci-toggle">
            <button class="basic-btn" id="basicToggle" onclick="setCalcMode('basic')">Basic</button>
            <button class="sci-btn" id="sciToggle" onclick="setCalcMode('sci')">Scientific</button>
        </div>
        <div class="sci-pad" id="sciPad" style="display:none">
            <button class="calc-btn sci" data-v="sin(">sin</button>
            <button class="calc-btn sci" data-v="cos(">cos</button>
            <button class="calc-btn sci" data-v="tan(">tan</button>
            <button class="calc-btn sci" data-v="log(">log</button>
            <button class="calc-btn sci" data-v="ln(">ln</button>
            <button class="calc-btn sci" data-v="sqrt(">&#8730;</button>
            <button class="calc-btn sci" data-v="cbrt(">&#8731;</button>
            <button class="calc-btn sci" data-v="^">x^y</button>
            <button class="calc-btn sci" data-v="!">n!</button>
            <button class="calc-btn sci" data-v="pi">&#960;</button>
            <button class="calc-btn sci" data-v="e">e</button>
            <button class="calc-btn sci" data-v="abs(">|x|</button>
            <button class="calc-btn sci" data-v="(">(</button>
            <button class="calc-btn sci" data-v=")">)</button>
            <button class="calc-btn sci" data-v="%">%</button>
        </div>
        <div class="calc-grid" id="calcGrid">
            <button class="calc-btn ac" data-v="AC">AC</button>
            <button class="calc-btn fn" data-v="‚å´">&#9003;</button>
            <button class="calc-btn fn" data-v="%">%</button>
            <button class="calc-btn op" data-v="/">&#247;</button>
            <button class="calc-btn" data-v="7">7</button>
            <button class="calc-btn" data-v="8">8</button>
            <button class="calc-btn" data-v="9">9</button>
            <button class="calc-btn op" data-v="*">&#215;</button>
            <button class="calc-btn" data-v="4">4</button>
            <button class="calc-btn" data-v="5">5</button>
            <button class="calc-btn" data-v="6">6</button>
            <button class="calc-btn op" data-v="-">&#8722;</button>
            <button class="calc-btn" data-v="1">1</button>
            <button class="calc-btn" data-v="2">2</button>
            <button class="calc-btn" data-v="3">3</button>
            <button class="calc-btn op" data-v="+">+</button>
            <button class="calc-btn" data-v="00">00</button>
            <button class="calc-btn" data-v="0">0</button>
            <button class="calc-btn" data-v=".">.</button>
            <button class="calc-btn eq" data-v="=">=</button>
        </div>
    </div>

    <!-- ========== UNIT CONVERTER PAGE ========== -->
    <div class="page" id="page-convert">
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:var(--accent-glow);color:var(--accent)">&#8644;</div>
                Unit Converter
            </div>
            <div class="unit-pills" id="unitCatPills">
                <button class="unit-pill active" data-cat="length">Length</button>
                <button class="unit-pill" data-cat="mass">Weight</button>
                <button class="unit-pill" data-cat="volume">Volume</button>
                <button class="unit-pill" data-cat="fabric">Fabric</button>
                <button class="unit-pill" data-cat="temperature">Temp</button>
            </div>
            <div class="form-label">Value</div>
            <input class="form-input" type="number" id="convValue" value="1" step="any">
            <div class="form-row" style="margin-top:12px">
                <div>
                    <div class="form-label">From</div>
                    <select class="form-select" id="convFrom"></select>
                </div>
                <div style="flex:0;padding-bottom:6px;color:var(--accent);font-size:1.2rem;align-self:flex-end">&#10132;</div>
                <div>
                    <div class="form-label">To</div>
                    <select class="form-select" id="convTo"></select>
                </div>
            </div>
            <button class="form-btn primary" onclick="doConvert()">Convert</button>
            <div class="result-box" id="convResult" style="display:none">
                <div class="result-label">Result</div>
                <div class="result-val" id="convResVal"></div>
                <div class="result-detail" id="convResDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== FOAM DENSITY PAGE ========== -->
    <div class="page" id="page-foam">
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(245,158,11,.2);color:var(--gold)">&#9679;</div>
                Foam Density Calculator
            </div>
            <div class="form-label">Foam Weight (grams)</div>
            <input class="form-input" type="number" id="foamWeight" value="" placeholder="e.g. 500" step="any">
            <div class="form-label">Length (cm)</div>
            <input class="form-input" type="number" id="foamLength" value="" placeholder="e.g. 100" step="any">
            <div class="form-label">Width (cm)</div>
            <input class="form-input" type="number" id="foamWidth" value="" placeholder="e.g. 50" step="any">
            <div class="form-label">Thickness (cm)</div>
            <input class="form-input" type="number" id="foamThick" value="" placeholder="e.g. 5" step="any">
            <button class="form-btn gold" onclick="calcFoamDensity()">Calculate Density</button>
            <div class="result-box gold-border" id="foamResult" style="display:none">
                <div class="result-label">Foam Density</div>
                <div class="result-val" id="foamResVal"></div>
                <div class="result-detail" id="foamResDetail"></div>
            </div>
        </div>
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(20,184,166,.2);color:var(--teal)">&#9670;</div>
                Quick Density Reference
            </div>
            <div style="font-size:.85rem;color:var(--text-sec);line-height:1.8">
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(37,51,82,.4)"><span>Soft Foam (Mattress)</span><span style="color:var(--teal)">16 - 24 kg/m&#179;</span></div>
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(37,51,82,.4)"><span>Medium Foam (Cushion)</span><span style="color:var(--gold)">24 - 35 kg/m&#179;</span></div>
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(37,51,82,.4)"><span>Firm Foam (Sofa)</span><span style="color:var(--accent)">35 - 50 kg/m&#179;</span></div>
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(37,51,82,.4)"><span>High Density (Auto)</span><span style="color:var(--rose)">50 - 80 kg/m&#179;</span></div>
                <div style="display:flex;justify-content:space-between;padding:6px 0"><span>Rebonded Foam</span><span style="color:var(--success)">80 - 150 kg/m&#179;</span></div>
            </div>
        </div>
    </div>

    <!-- ========== FOAM COMPARE PAGE ========== -->
    <div class="page" id="page-foam_compare">
        <div class="form-card">
            <div class="form-title">Foam Rate Comparison</div>
            <div class="form-row">
                <div><label class="form-label">Length (In)</label><input type="number" id="fL" class="form-input" value="72"></div>
                <div><label class="form-label">Width (In)</label><input type="number" id="fW" class="form-input" value="36"></div>
            </div>
            <label class="form-label">Density (D)</label><input type="number" id="fD" class="form-input" value="32">
            <label class="form-label">Local Rate</label>
            <div class="form-row">
                <input type="number" id="rL" class="form-input" placeholder="Rate">
                <select id="uL" class="form-select"><option value="kg">per KG</option><option value="mm">per MM</option></select>
            </div>
            <label class="form-label">Branded Rate</label>
            <div class="form-row">
                <input type="number" id="rB" class="form-input" placeholder="Rate">
                <select id="uB" class="form-select"><option value="mm">per MM</option><option value="kg">per KG</option></select>
            </div>
            <button class="form-btn primary" onclick="runFoamCompare()" style="background:var(--accent); color:white; width:100%; padding:14px; border-radius:14px; margin-top:15px; border:none; font-weight:700;">Compare Now</button>
            <div class="result-box" id="fRes" style="display:none; margin-top:15px; background:var(--input); padding:15px; border-radius:12px; border-left:4px solid var(--accent);">
                <div id="fVal" style="font-size:1.5rem; font-weight:700; color:var(--success);"></div>
                <div id="fDet" style="font-size:0.9rem; color:var(--text-sec); margin-top:5px;"></div>
            </div>
        </div>
    </div>

    <!-- ========== FABRIC MASTER PAGE (with 3 calculators) ========== -->
    <div class="page" id="page-fabric">
        <!-- Fabric Table -->
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(244,63,94,.2);color:var(--rose)">&#9733;</div>
                Fabric Master
            </div>
            <div class="search-box">
                <span class="search-icon">&#128269;</span>
                <input type="text" id="fabricSearch" placeholder="Search fabric..." oninput="filterFabrics()">
            </div>
            <div style="overflow-x:auto;border-radius:var(--radius-sm);border:1px solid var(--border)">
                <table class="fabric-table" id="fabricTable">
                    <thead><tr><th>Fabric</th><th>GSM</th><th>Width</th><th>Use</th></tr></thead>
                    <tbody id="fabricBody"></tbody>
                </table>
            </div>
        </div>

        <!-- GSM Calculator (Original) -->
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:var(--accent-glow);color:var(--accent)">üìè</div>
                GSM Calculator
            </div>
            <div class="form-label">Fabric Weight (grams)</div>
            <input class="form-input" type="number" id="gsmWeight" placeholder="e.g. 25" step="any">
            <div class="form-row">
                <div><div class="form-label">Length (cm)</div><input class="form-input" type="number" id="gsmLength" placeholder="e.g. 10" step="any"></div>
                <div><div class="form-label">Width (cm)</div><input class="form-input" type="number" id="gsmWidth" placeholder="e.g. 10" step="any"></div>
            </div>
            <button class="form-btn teal" onclick="calcGSM()">Calculate GSM</button>
            <div class="result-box teal-border" id="gsmResult" style="display:none">
                <div class="result-label">GSM (g/m¬≤)</div>
                <div class="result-val" id="gsmResVal"></div>
                <div class="result-detail" id="gsmResDetail"></div>
            </div>
        </div>

        <!-- Meter Calculator (GSM + Width + Weight ‚Üí Length in meters) -->
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(34,197,94,.2);color:var(--success)">üìè</div>
                Meter Calculator
            </div>
            <div class="form-label">GSM</div>
            <input class="form-input" type="number" id="meterGSM" placeholder="e.g. 150" step="any">
            <div class="form-row">
                <div><div class="form-label">Width (cm)</div><input class="form-input" type="number" id="meterWidth" placeholder="e.g. 150" step="any"></div>
                <div><div class="form-label">Weight (kg)</div><input class="form-input" type="number" id="meterWeight" placeholder="e.g. 5" step="any"></div>
            </div>
            <button class="form-btn success" style="background:var(--success);color:white;" onclick="calcMeter()">Calculate Length</button>
            <div class="result-box" id="meterResult" style="display:none; border-left-color:var(--success);">
                <div class="result-label">Length</div>
                <div class="result-val" id="meterResVal"></div>
                <div class="result-detail" id="meterResDetail"></div>
            </div>
        </div>

        <!-- Weight Calculator (GSM + Length + Width ‚Üí Weight in grams) -->
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(245,158,11,.2);color:var(--gold)">‚öñÔ∏è</div>
                Weight Calculator
            </div>
            <div class="form-label">GSM</div>
            <input class="form-input" type="number" id="weightGSM" placeholder="e.g. 150" step="any">
            <div class="form-row">
                <div><div class="form-label">Length (m)</div><input class="form-input" type="number" id="weightLength" placeholder="e.g. 10" step="any"></div>
                <div><div class="form-label">Width (cm)</div><input class="form-input" type="number" id="weightWidth" placeholder="e.g. 150" step="any"></div>
            </div>
            <button class="form-btn gold" onclick="calcWeight()">Calculate Weight</button>
            <div class="result-box gold-border" id="weightResult" style="display:none">
                <div class="result-label">Weight</div>
                <div class="result-val" id="weightResVal"></div>
                <div class="result-detail" id="weightResDetail"></div>
            </div>
        </div>

        <!-- Fabric Requirement (existing) -->
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:rgba(245,158,11,.2);color:var(--gold)">&#9878;</div>
                Fabric Requirement
            </div>
            <div class="form-label">Item to make</div>
            <select class="form-select" id="fabricItem">
                <option value="sofa_3seat">3-Seater Sofa Cover</option>
                <option value="sofa_2seat">2-Seater Sofa Cover</option>
                <option value="chair">Chair Cover</option>
                <option value="cushion">Cushion Cover (18x18)</option>
                <option value="curtain">Curtain (per window)</option>
                <option value="bedsheet_single">Bedsheet Single</option>
                <option value="bedsheet_double">Bedsheet Double</option>
                <option value="pillow">Pillow Cover</option>
            </select>
            <div class="form-label">Fabric Width (inches)</div>
            <select class="form-select" id="fabricWidth">
                <option value="44">44 inches</option><option value="54" selected>54 inches</option>
                <option value="60">60 inches</option><option value="72">72 inches</option>
                <option value="90">90 inches</option><option value="108">108 inches</option>
            </select>
            <div class="form-label">Quantity</div>
            <input class="form-input" type="number" id="fabricQty" value="1" min="1">
            <button class="form-btn primary" onclick="calcFabricReq()">Calculate Requirement</button>
            <div class="result-box" id="fabricReqResult" style="display:none">
                <div class="result-label">Fabric Required</div>
                <div class="result-val" id="fabricReqVal"></div>
                <div class="result-detail" id="fabricReqDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== HISTORY PAGE ========== -->
    <div class="page" id="page-history">
        <div class="form-card">
            <div class="form-title">
                <div class="icon" style="background:var(--accent-glow);color:var(--accent)">üìú</div>
                Calculation History
            </div>
            <div class="history-page-list" id="historyPageList"></div>
            <div class="history-page-export">
                <button class="form-btn primary" style="width:auto; padding:10px 20px;" onclick="exportHistory('csv')">CSV</button>
                <button class="form-btn primary" style="width:auto; padding:10px 20px;" onclick="exportHistory('json')">JSON</button>
                <button class="form-btn primary" style="width:auto; padding:10px 20px;" onclick="exportHistory('txt')">TXT</button>
                <button class="form-btn primary" style="width:auto; padding:10px 20px;" onclick="exportHistory('pdf')">PDF</button>
            </div>
            <button class="form-btn gold" style="margin-top:10px;" onclick="clearHistory()">Clear History</button>
        </div>
    </div>

    <!-- ========== SIP CALCULATOR PAGE ========== -->
    <div class="page" id="page-sip">
        <div class="form-card">
            <div class="form-title"><div class="icon" style="background:rgba(59,130,246,.2);color:var(--accent)">üìà</div>SIP Calculator</div>
            <div class="form-label">Monthly Investment (‚Çπ)</div><input class="form-input" type="number" id="sipAmount" placeholder="e.g. 5000" step="any">
            <div class="form-label">Expected Return Rate (% p.a.)</div><input class="form-input" type="number" id="sipRate" placeholder="e.g. 12" step="any">
            <div class="form-label">Time Period (years)</div><input class="form-input" type="number" id="sipYears" placeholder="e.g. 10" step="any">
            <button class="form-btn primary" onclick="calcSIP()">Calculate SIP</button>
            <div class="result-box" id="sipResult" style="display:none">
                <div class="result-label">Maturity Amount</div><div class="result-val" id="sipResVal"></div>
                <div class="result-detail" id="sipResDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== STEP-UP SIP PAGE ========== -->
    <div class="page" id="page-stepup-sip">
        <div class="form-card">
            <div class="form-title"><div class="icon" style="background:rgba(139,92,246,.2);color:#8b5cf6">üìä</div>Step-up SIP Calculator</div>
            <div class="form-label">Monthly Investment (‚Çπ)</div><input class="form-input" type="number" id="stepSipAmount" placeholder="e.g. 5000" step="any">
            <div class="form-label">Annual Increment (%)</div><input class="form-input" type="number" id="stepSipIncrement" placeholder="e.g. 10" step="any">
            <div class="form-label">Expected Return Rate (% p.a.)</div><input class="form-input" type="number" id="stepSipRate" placeholder="e.g. 12" step="any">
            <div class="form-label">Time Period (years)</div><input class="form-input" type="number" id="stepSipYears" placeholder="e.g. 10" step="any">
            <button class="form-btn primary" onclick="calcStepUpSIP()">Calculate Step-up SIP</button>
            <div class="result-box" id="stepSipResult" style="display:none">
                <div class="result-label">Maturity Amount</div><div class="result-val" id="stepSipResVal"></div>
                <div class="result-detail" id="stepSipResDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== EMI CALCULATOR PAGE ========== -->
    <div class="page" id="page-emi">
        <div class="form-card">
            <div class="form-title"><div class="icon" style="background:rgba(245,158,11,.2);color:var(--gold)">üí∞</div>EMI Calculator</div>
            <div class="form-label">Loan Amount (‚Çπ)</div><input class="form-input" type="number" id="emiAmount" placeholder="e.g. 500000" step="any">
            <div class="form-label">Interest Rate (% p.a.)</div><input class="form-input" type="number" id="emiRate" placeholder="e.g. 9.5" step="any">
            <div class="form-label">Loan Tenure (months)</div><input class="form-input" type="number" id="emiMonths" placeholder="e.g. 60" step="any">
            <button class="form-btn gold" onclick="calcEMI()">Calculate EMI</button>
            <div class="result-box gold-border" id="emiResult" style="display:none">
                <div class="result-label">Monthly EMI</div><div class="result-val" id="emiResVal"></div>
                <div class="result-detail" id="emiResDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== BMI CALCULATOR PAGE ========== -->
    <div class="page" id="page-bmi">
        <div class="form-card">
            <div class="form-title"><div class="icon" style="background:rgba(236,72,153,.2);color:#ec4899">‚öñÔ∏è</div>BMI Calculator</div>
            <div class="form-label">Height (cm)</div><input class="form-input" type="number" id="bmiHeight" placeholder="e.g. 170" step="any">
            <div class="form-label">Weight (kg)</div><input class="form-input" type="number" id="bmiWeight" placeholder="e.g. 70" step="any">
            <button class="form-btn teal" onclick="calcBMI()">Calculate BMI</button>
            <div class="result-box" id="bmiResult" style="display:none">
                <div class="result-label">Your BMI</div><div class="result-val" id="bmiResVal"></div>
                <div class="result-detail" id="bmiResDetail"></div>
            </div>
        </div>
    </div>

    <!-- ========== AGE CALCULATOR PAGE ========== -->
    <div class="page" id="page-age">
        <div class="form-card">
            <div class="form-title"><div class="icon" style="background:rgba(20,184,166,.2);color:var(--teal)">üìÖ</div>Age Calculator</div>
            <div class="form-label">Date of Birth</div><input class="form-input" type="date" id="dob">
            <div class="form-label">As on Date (leave blank for today)</div><input class="form-input" type="date" id="asOnDate">
            <button class="form-btn teal" onclick="calcAge()">Calculate Age</button>
            <div class="result-box teal-border" id="ageResult" style="display:none">
                <div class="result-label">Your Age</div><div class="result-val" id="ageResVal"></div>
                <div class="result-detail" id="ageResDetail"></div>
            </div>
        </div>
    </div>

</div> <!-- main close -->

<!-- Social Footer (Robust Icons from Simple Icons CDN) -->
<div style="display: flex; flex-direction: column; align-items: center; background: transparent; padding: 10px 0; gap: 8px; margin-bottom: 5px;">
    <div style="display: flex; gap: 20px; align-items: center;">
        <a href="https://facebook.com/fardip.thakre" target="_blank"><img src="https://cdn.simpleicons.org/facebook" width="24" height="24" style="filter: none !important;" alt="Facebook"></a>
        <a href="https://instagram.com/fardipthakre" target="_blank"><img src="https://cdn.simpleicons.org/instagram" width="24" height="24" style="filter: none !important;" alt="Instagram"></a>
        <a href="https://youtube.com/@FardipThakre" target="_blank"><img src="https://cdn.simpleicons.org/youtube" width="24" height="24" style="filter: none !important;" alt="YouTube"></a>
    </div>
    <span style="font-size: 7px; color: #888; letter-spacing: 1px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 500; text-transform: uppercase;">¬© COPYRIGHT FARDIP THAKRE 2026</span>
</div>

<!-- BOTTOM TAB BAR -->
<nav class="tab-bar">
    <button class="tab-item active" data-page="calc"><div class="tab-icon">&#127386;</div><div class="tab-label">Calculator</div></button>
    <button class="tab-item" data-page="convert"><div class="tab-icon">&#8644;</div><div class="tab-label">Convert</div></button>
    <button class="tab-item" data-page="foam"><div class="tab-icon">&#9679;</div><div class="tab-label">Foam</div></button>
    <button class="tab-item" data-page="foam_compare"><div class="tab-icon">‚öñÔ∏è</div><div class="tab-label">Foam Compare</div></button>
    <button class="tab-item" data-page="fabric"><div class="tab-icon">&#9733;</div><div class="tab-label">Fabric</div></button>
</nav>

<!-- CONTACT MODAL (with Simple Icons) -->
<div class="modal" id="contactModal">
    <div class="modal-content">
        <span class="close-modal" id="closeModal">&times;</span>
        <h3>Contact FARDIP THAKRE</h3>
        <p>üìß Email: fardip@example.com</p>
        <p>üìû Phone: +91 98765 43210</p>
        <p>üåê Website: <a href="#" target="_blank">www.fardipthakre.com</a></p>
        <p>Follow me on social media:</p>
        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 10px;">
            <a href="https://facebook.com/fardip.thakre" target="_blank"><img src="https://cdn.simpleicons.org/facebook" width="32" height="32" style="filter: none !important;" alt="Facebook"></a>
            <a href="https://instagram.com/fardipthakre" target="_blank"><img src="https://cdn.simpleicons.org/instagram" width="32" height="32" style="filter: none !important;" alt="Instagram"></a>
            <a href="https://youtube.com/@FardipThakre" target="_blank"><img src="https://cdn.simpleicons.org/youtube" width="32" height="32" style="filter: none !important;" alt="YouTube"></a>
        </div>
    </div>
</div>

<!-- SCRIPTS (unchanged, same as previous working version) -->
<script>
// ========== ORIGINAL SCRIPT (IIFE) with modifications ==========
(function(){
    // ========== TAB NAVIGATION ==========
    const tabs = document.querySelectorAll('.tab-item');
    const pages = document.querySelectorAll('.page');
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const p = tab.dataset.page;
            tabs.forEach(t => t.classList.remove('active'));
            pages.forEach(pg => pg.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('page-' + p).classList.add('active');
        });
    });

    // ========== CALCULATOR ==========
    const exprEl = document.getElementById('calcExpr');
    const resEl = document.getElementById('calcResult');
    let expr = '';
    let lastCalc = false;
    let history = JSON.parse(localStorage.getItem('calcHistory')) || [];

    function updateHistoryPage() {
        const list = document.getElementById('historyPageList');
        if (list) {
            list.innerHTML = history.slice().reverse().map(item =>
                `<div class="history-page-item">
                    <span>${item.expr} = ${item.result}</span>
                </div>`
            ).join('');
        }
    }

    window.exportHistory = function(format) {
        let data, filename, mime;
        if (format === 'csv') {
            data = "Expression,Result\n" + history.map(h => `"${h.expr}","${h.result}"`).join('\n');
            filename = 'history.csv';
            mime = 'text/csv';
        } else if (format === 'json') {
            data = JSON.stringify(history, null, 2);
            filename = 'history.json';
            mime = 'application/json';
        } else if (format === 'txt') {
            data = history.map(h => `${h.expr} = ${h.result}`).join('\n');
            filename = 'history.txt';
            mime = 'text/plain';
        } else if (format === 'pdf') {
            alert('PDF export would require additional libraries. Please use CSV/JSON/TXT.');
            return;
        }
        const blob = new Blob([data], {type: mime});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);
    };

    window.clearHistory = function() {
        history = [];
        localStorage.removeItem('calcHistory');
        updateHistoryPage();
    };

    math.import({ ln: function(x){ return Math.log(x); } }, {override:true});

    function updDisp(){ exprEl.textContent = expr || '0'; }

    document.querySelectorAll('#calcGrid .calc-btn, #sciPad .calc-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const v = btn.dataset.v;
            if(v === 'AC'){ expr=''; resEl.textContent='0'; updDisp(); lastCalc=false; return; }
            if(v === '‚å´'){ expr = expr.slice(0,-1); updDisp(); return; }
            if(v === '='){
                if(!expr.trim()) return;
                let ev = expr;
                ev = ev.replace(/(\d+\.?\d*|pi|e|\))\!/g, 'factorial($1)');
                ev = ev.replace(/(\d+\.?\d*)\%/g, '($1/100)');
                try{
                    let r = math.evaluate(ev);
                    let rs = String(r);
                    if(typeof r === 'number' && !Number.isInteger(r)){
                        rs = r.toFixed(10).replace(/\.?0+$/, '');
                    }
                    resEl.textContent = rs;
                    history.push({ expr: expr, result: rs });
                    localStorage.setItem('calcHistory', JSON.stringify(history));
                    updateHistoryPage();
                    lastCalc = true;
                }catch(e){
                    resEl.textContent = 'Error';
                }
                return;
            }
            if(lastCalc && !isNaN(Number(v))){
                expr = '';
                lastCalc = false;
            }
            lastCalc = false;
            expr += v;
            updDisp();
        });
    });

    window.setCalcMode = function(mode){
        const sciPad = document.getElementById('sciPad');
        const basicBtn = document.getElementById('basicToggle');
        const sciBtn = document.getElementById('sciToggle');
        if(mode === 'sci'){
            sciPad.style.display = 'grid';
            basicBtn.className = 'basic-btn inactive';
            sciBtn.className = 'sci-btn active-mode';
        } else {
            sciPad.style.display = 'none';
            basicBtn.className = 'basic-btn';
            sciBtn.className = 'sci-btn';
        }
    };

    // ========== UNIT CONVERTER ==========
    const unitData = {
        length: { units: ['Meter','CM','MM','KM','Inch','Feet','Yard','Mile'], factors: {Meter:1,CM:0.01,MM:0.001,KM:1000,Inch:0.0254,Feet:0.3048,Yard:0.9144,Mile:1609.344} },
        mass: { units: ['KG','Gram','MG','Pound','Ounce','Ton','Quintal'], factors: {KG:1,Gram:0.001,MG:0.000001,Pound:0.453592,Ounce:0.0283495,Ton:1000,Quintal:100} },
        volume: { units: ['Liter','ml','Gallon','Quart','Pint'], factors: {Liter:1,ml:0.001,Gallon:3.78541,Quart:0.946353,Pint:0.473176} },
        fabric: { units: ['Meter','Yard','Feet','Inch','CM'], factors: {Meter:1,Yard:0.9144,Feet:0.3048,Inch:0.0254,CM:0.01} },
        temperature: { units: ['Celsius','Fahrenheit','Kelvin'], factors: null }
    };

    let curCat = 'length';

    function populateUnits(){
        const from = document.getElementById('convFrom');
        const to = document.getElementById('convTo');
        const units = unitData[curCat].units;
        from.innerHTML = units.map((u,i) => `<option value="${u}" ${i===0?'selected':''}>${u}</option>`).join('');
        to.innerHTML = units.map((u,i) => `<option value="${u}" ${i===1?'selected':''}>${u}</option>`).join('');
    }
    populateUnits();

    document.querySelectorAll('#unitCatPills .unit-pill').forEach(pill => {
        pill.addEventListener('click', () => {
            document.querySelectorAll('#unitCatPills .unit-pill').forEach(p => p.classList.remove('active'));
            pill.classList.add('active');
            curCat = pill.dataset.cat;
            populateUnits();
            document.getElementById('convResult').style.display = 'none';
        });
    });

    window.doConvert = function(){
        const val = parseFloat(document.getElementById('convValue').value);
        if(isNaN(val)) return;
        const from = document.getElementById('convFrom').value;
        const to = document.getElementById('convTo').value;
        let result;
        if(curCat === 'temperature'){
            let c;
            if(from === 'Celsius') c = val;
            else if(from === 'Fahrenheit') c = (val - 32) * 5/9;
            else c = val - 273.15;
            if(to === 'Celsius') result = c;
            else if(to === 'Fahrenheit') result = c * 9/5 + 32;
            else result = c + 273.15;
        } else {
            const factors = unitData[curCat].factors;
            const base = val * factors[from];
            result = base / factors[to];
        }
        const fmt = Number.isInteger(result) ? result.toString() : result.toFixed(6).replace(/\.?0+$/,'');
        document.getElementById('convResVal').textContent = fmt + ' ' + to;
        document.getElementById('convResDetail').textContent = val + ' ' + from + ' = ' + fmt + ' ' + to;
        document.getElementById('convResult').style.display = 'block';
    };

    // ========== FOAM DENSITY ==========
    window.calcFoamDensity = function(){
        const w = parseFloat(document.getElementById('foamWeight').value);
        const l = parseFloat(document.getElementById('foamLength').value);
        const wd = parseFloat(document.getElementById('foamWidth').value);
        const t = parseFloat(document.getElementById('foamThick').value);
        if([w,l,wd,t].some(isNaN) || l<=0 || wd<=0 || t<=0){
            document.getElementById('foamResVal').textContent = 'Invalid input';
            document.getElementById('foamResDetail').textContent = 'Please fill all fields with valid numbers.';
            document.getElementById('foamResult').style.display = 'block';
            return;
        }
        const volCm3 = l * wd * t;
        const volM3 = volCm3 / 1000000;
        const densityKg = (w / 1000) / volM3;
        const fmt = densityKg.toFixed(2);
        let grade = '';
        if(densityKg < 16) grade = 'Very Soft (Low quality)';
        else if(densityKg < 24) grade = 'Soft - Mattress Grade';
        else if(densityKg < 35) grade = 'Medium - Cushion Grade';
        else if(densityKg < 50) grade = 'Firm - Sofa Grade';
        else if(densityKg < 80) grade = 'High Density - Auto Grade';
        else grade = 'Rebonded / Extra High Density';
        document.getElementById('foamResVal').textContent = fmt + ' kg/m\u00B3';
        document.getElementById('foamResDetail').innerHTML =
            'Volume: ' + volCm3.toFixed(1) + ' cm\u00B3 (' + volM3.toFixed(6) + ' m\u00B3)<br>' +
            'Weight: ' + w + ' g (' + (w/1000).toFixed(3) + ' kg)<br>' +
            '<strong style="color:var(--gold)">' + grade + '</strong>';
        document.getElementById('foamResult').style.display = 'block';
    };

    // ========== FABRIC MASTER ==========
    const fabricData = [
        {name:'Cotton',gsm:'100-200',width:'44-60"',use:'Shirts, Bedsheets'},
        {name:'Polyester',gsm:'75-250',width:'44-60"',use:'Curtains, Lining'},
        {name:'Silk',gsm:'30-120',width:'44-45"',use:'Saree, Dress'},
        {name:'Linen',gsm:'150-300',width:'54-60"',use:'Kurta, Table Cloth'},
        {name:'Denim',gsm:'200-400',width:'54-60"',use:'Jeans, Bags'},
        {name:'Velvet',gsm:'250-400',width:'44-54"',use:'Sofa, Curtains'},
        {name:'Chiffon',gsm:'30-70',width:'44-45"',use:'Dupatta, Saree'},
        {name:'Canvas',gsm:'200-600',width:'54-72"',use:'Bags, Tents'},
        {name:'Satin',gsm:'80-160',width:'44-54"',use:'Lining, Dress'},
        {name:'Georgette',gsm:'40-100',width:'44-45"',use:'Saree, Scarf'},
        {name:'Rexine/PVC',gsm:'300-600',width:'54"',use:'Sofa, Car Seat'},
        {name:'Leatherette',gsm:'350-700',width:'54-60"',use:'Upholstery'},
        {name:'Net/Tulle',gsm:'20-60',width:'44-54"',use:'Decoration'},
        {name:'Fleece',gsm:'150-350',width:'58-60"',use:'Blanket, Jacket'},
        {name:'Muslin',gsm:'50-100',width:'44-54"',use:'Baby Cloth, Drape'},
        {name:'Twill',gsm:'150-350',width:'54-60"',use:'Uniform, Pant'},
        {name:'Organza',gsm:'30-70',width:'44-45"',use:'Decoration, Saree'},
        {name:'Poplin',gsm:'100-150',width:'44-58"',use:'Shirt, Dress'},
        {name:'Khadi',gsm:'120-250',width:'36-44"',use:'Kurta, Traditional'},
        {name:'Jute',gsm:'200-500',width:'40-50"',use:'Bags, Decor'},
    ];

    function renderFabrics(data){
        document.getElementById('fabricBody').innerHTML = data.map(f =>
            `<tr><td style="color:var(--text);font-weight:600">${f.name}</td><td>${f.gsm}</td><td>${f.width}</td><td>${f.use}</td></tr>`
        ).join('');
    }
    renderFabrics(fabricData);

    window.filterFabrics = function(){
        const q = document.getElementById('fabricSearch').value.toLowerCase();
        const filtered = fabricData.filter(f =>
            f.name.toLowerCase().includes(q) || f.use.toLowerCase().includes(q)
        );
        renderFabrics(filtered);
    };

    // GSM Calculator (Original)
    window.calcGSM = function(){
        const w = parseFloat(document.getElementById('gsmWeight').value);
        const l = parseFloat(document.getElementById('gsmLength').value);
        const wd = parseFloat(document.getElementById('gsmWidth').value);
        if([w,l,wd].some(isNaN) || l<=0 || wd<=0){
            document.getElementById('gsmResVal').textContent = 'Invalid input';
            document.getElementById('gsmResDetail').textContent = '';
            document.getElementById('gsmResult').style.display = 'block';
            return;
        }
        const areaM2 = (l/100) * (wd/100);
        const gsm = w / areaM2;
        const fmt = gsm.toFixed(1);
        let cat = '';
        if(gsm < 80) cat = 'Lightweight (Sheer/Voile)';
        else if(gsm < 150) cat = 'Light-Medium (Shirt/Dress)';
        else if(gsm < 250) cat = 'Medium (Kurta/Bedsheet)';
        else if(gsm < 400) cat = 'Heavy (Denim/Canvas)';
        else cat = 'Extra Heavy (Upholstery)';
        document.getElementById('gsmResVal').textContent = fmt + ' GSM';
        document.getElementById('gsmResDetail').innerHTML =
            'Sample Area: ' + (l*wd).toFixed(1) + ' cm\u00B2 (' + areaM2.toFixed(6) + ' m\u00B2)<br>' +
            '<strong style="color:var(--teal)">' + cat + '</strong>';
        document.getElementById('gsmResult').style.display = 'block';
    };

    // Meter Calculator (GSM + Width + Weight -> Length in meters)
    window.calcMeter = function(){
        const gsm = parseFloat(document.getElementById('meterGSM').value);
        const wd = parseFloat(document.getElementById('meterWidth').value);
        const wt = parseFloat(document.getElementById('meterWeight').value); // in kg
        if(isNaN(gsm) || isNaN(wd) || isNaN(wt) || gsm<=0 || wd<=0 || wt<=0){
            alert('Please fill all fields with positive numbers');
            return;
        }
        const areaM2 = (wt * 1000) / gsm;
        const widthM = wd / 100;
        const lengthM = areaM2 / widthM;
        document.getElementById('meterResVal').textContent = lengthM.toFixed(2) + ' m';
        document.getElementById('meterResDetail').innerHTML =
            `GSM: ${gsm}, Width: ${wd}cm, Weight: ${wt}kg ‚Üí Length: ${lengthM.toFixed(2)}m`;
        document.getElementById('meterResult').style.display = 'block';
    };

    // Weight Calculator (GSM + Length + Width -> Weight in grams)
    window.calcWeight = function(){
        const gsm = parseFloat(document.getElementById('weightGSM').value);
        const len = parseFloat(document.getElementById('weightLength').value);
        const wd = parseFloat(document.getElementById('weightWidth').value);
        if(isNaN(gsm) || isNaN(len) || isNaN(wd) || gsm<=0 || len<=0 || wd<=0){
            alert('Please fill all fields with positive numbers');
            return;
        }
        const areaM2 = len * (wd/100);
        const weightG = gsm * areaM2;
        document.getElementById('weightResVal').textContent = weightG.toFixed(1) + ' g';
        document.getElementById('weightResDetail').innerHTML =
            `GSM: ${gsm}, Length: ${len}m, Width: ${wd}cm ‚Üí Weight: ${weightG.toFixed(1)}g (${(weightG/1000).toFixed(3)}kg)`;
        document.getElementById('weightResult').style.display = 'block';
    };

    // Fabric Requirement Calculator
    const fabricReqs = {
        sofa_3seat: {name:'3-Seater Sofa Cover', meters:{44:14,54:12,60:10,72:9,90:7.5,108:6.5}},
        sofa_2seat: {name:'2-Seater Sofa Cover', meters:{44:10,54:8.5,60:7.5,72:6.5,90:5.5,108:4.5}},
        chair: {name:'Chair Cover', meters:{44:3.5,54:3,60:2.5,72:2,90:1.8,108:1.5}},
        cushion: {name:'Cushion Cover (18x18)', meters:{44:0.55,54:0.5,60:0.5,72:0.5,90:0.5,108:0.5}},
        curtain: {name:'Curtain (per window, 48x84)', meters:{44:5,54:4.5,60:4,72:3.5,90:2.8,108:2.5}},
        bedsheet_single: {name:'Single Bedsheet', meters:{44:5.5,54:4.5,60:4,72:3.5,90:2.8,108:2.5}},
        bedsheet_double: {name:'Double Bedsheet', meters:{44:8,54:6.5,60:6,72:5,90:4,108:3.5}},
        pillow: {name:'Pillow Cover', meters:{44:0.6,54:0.55,60:0.5,72:0.5,90:0.5,108:0.5}},
    };

    window.calcFabricReq = function(){
        const item = document.getElementById('fabricItem').value;
        const width = document.getElementById('fabricWidth').value;
        const qty = parseInt(document.getElementById('fabricQty').value) || 1;
        const data = fabricReqs[item];
        if(!data) return;
        const perPiece = data.meters[width] || 3;
        const total = perPiece * qty;
        const totalYards = (total / 0.9144).toFixed(2);
        document.getElementById('fabricReqVal').textContent = total.toFixed(2) + ' meters';
        document.getElementById('fabricReqDetail').innerHTML =
            'Item: ' + data.name + '<br>' +
            'Fabric Width: ' + width + '"<br>' +
            'Per piece: ' + perPiece + ' m<br>' +
            'Quantity: ' + qty + '<br>' +
            'Total: ' + total.toFixed(2) + ' m (' + totalYards + ' yards)';
        document.getElementById('fabricReqResult').style.display = 'block';
    };

    // Keyboard support for calculator
    document.addEventListener('keydown', function(e){
        const activePage = document.querySelector('.page.active');
        if(!activePage || activePage.id !== 'page-calc') return;
        const key = e.key;
        if('0123456789'.includes(key) || '+-*/.%^()'.includes(key)){
            e.preventDefault();
            expr += key;
            updDisp();
        } else if(key === 'Enter'){
            e.preventDefault();
            document.querySelector('.calc-btn.eq').click();
        } else if(key === 'Backspace'){
            e.preventDefault();
            expr = expr.slice(0,-1);
            updDisp();
        } else if(key === 'Escape'){
            e.preventDefault();
            expr = '';
            resEl.textContent = '0';
            updDisp();
        }
    });

    // Foam Compare
    window.runFoamCompare = function() {
        const l = parseFloat(document.getElementById('fL').value) * 25.4;
        const w = parseFloat(document.getElementById('fW').value) * 25.4;
        const d = parseFloat(document.getElementById('fD').value);
        if(!l || !w || !d) return alert("Sahi dimensions bhariye");
        const weight1mm = (l * w * 1 * d) / 1000000000;
        const rateL = parseFloat(document.getElementById('rL').value) || 0;
        const rateB = parseFloat(document.getElementById('rB').value) || 0;
        const unitL = document.getElementById('uL').value;
        const unitB = document.getElementById('uB').value;
        const finalL = (unitL === 'kg') ? rateL * weight1mm : rateL;
        const finalB = (unitB === 'mm') ? rateB : rateB * weight1mm;
        const diff = Math.abs(finalL - finalB);
        document.getElementById('fRes').style.display = 'block';
        document.getElementById('fVal').innerText = "Difference: ‚Çπ" + diff.toFixed(2) + " per mm";
        document.getElementById('fDet').innerHTML = 
            '<b>Local Rate:</b> ‚Çπ' + finalL.toFixed(2) + ' per mm<br>' +
            '<b>Brand Rate:</b> ‚Çπ' + finalB.toFixed(2) + ' per mm<br>' +
            '<small style="color:var(--text-dim)">Sheet Weight (1mm): ' + weight1mm.toFixed(3) + ' kg</small>';
    };
})();
</script>

<!-- SECOND SCRIPT: HAMBURGER MENU, THEME, SOUND, NEW CALCULATORS, CONTACT -->
<script>
// ========== SIDE MENU TOGGLE ==========
const menuToggle = document.getElementById('menuToggle');
const sideMenu = document.getElementById('sideMenu');
const closeMenu = document.getElementById('closeMenu');

function openMenu() { sideMenu.classList.add('open'); }
function closeMenuFn() { sideMenu.classList.remove('open'); }

menuToggle.addEventListener('click', openMenu);
closeMenu.addEventListener('click', closeMenuFn);
document.addEventListener('click', (e) => {
    if (!sideMenu.contains(e.target) && !menuToggle.contains(e.target) && sideMenu.classList.contains('open')) {
        closeMenuFn();
    }
});

// ========== THEME SWITCHING ==========
let currentTheme = localStorage.getItem('theme') || 'dark';
setTheme(currentTheme);

document.querySelectorAll('.theme-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const theme = btn.dataset.theme;
        setTheme(theme);
        localStorage.setItem('theme', theme);
        updateActiveThemeBtn(theme);
    });
});

function setTheme(theme) {
    const root = document.documentElement;
    if (theme === 'dark') {
        root.style.setProperty('--bg', '#0a0e1a');
        root.style.setProperty('--surface', '#111827');
        root.style.setProperty('--card', '#151d2e');
        root.style.setProperty('--text', '#e2e8f0');
        root.style.setProperty('--text-sec', '#94a3b8');
        root.style.setProperty('--border', '#253352');
    } else if (theme === 'light') {
        root.style.setProperty('--bg', '#f1f5f9');
        root.style.setProperty('--surface', '#ffffff');
        root.style.setProperty('--card', '#e2e8f0');
        root.style.setProperty('--text', '#0f172a');
        root.style.setProperty('--text-sec', '#334155');
        root.style.setProperty('--border', '#cbd5e1');
    } else if (theme === 'original') {
        root.style.setProperty('--bg', '#0b1a2e');
        root.style.setProperty('--surface', '#0f2a40');
        root.style.setProperty('--card', '#123b54');
        root.style.setProperty('--text', '#e0f2fe');
        root.style.setProperty('--text-sec', '#b0c4de');
        root.style.setProperty('--border', '#1e4b6e');
        root.style.setProperty('--accent', '#0284c7');
    }
    updateActiveThemeBtn(theme);
}

function updateActiveThemeBtn(theme) {
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.toggle('active-theme', btn.dataset.theme === theme);
    });
}

// ========== CLICK SOUND ==========
let soundType = localStorage.getItem('soundType') || 'tick';
document.getElementById('soundSelect').value = soundType;

document.getElementById('soundSelect').addEventListener('change', (e) => {
    soundType = e.target.value;
    localStorage.setItem('soundType', soundType);
});

let audioCtx = null;
function playSound() {
    if (soundType === 'silent') return;
    try {
        if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioCtx.state === 'suspended') {
            audioCtx.resume();
        }
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'sine';
        if (soundType === 'tick') osc.frequency.value = 1500;
        else if (soundType === 'click') osc.frequency.value = 800;
        else if (soundType === 'beep') osc.frequency.value = 600;
        gain.gain.setValueAtTime(0.1, now);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.03);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(now + 0.03);
    } catch(e) {}
}

const handleInteraction = (e) => {
    if (e.target.closest('button') || e.target.closest('a') || e.target.closest('.tab-item') || e.target.closest('.menu-item') || e.target.closest('.unit-pill')) {
        playSound();
        if (navigator.vibrate) navigator.vibrate(5);
    }
};
document.addEventListener('touchstart', handleInteraction, { passive: true });
document.addEventListener('mousedown', (e) => {
    if (!('ontouchstart' in window)) handleInteraction(e);
});

// ========== PAGE NAVIGATION FOR MENU ITEMS ==========
document.querySelectorAll('.menu-item[data-page]').forEach(item => {
    item.addEventListener('click', () => {
        const pageId = item.dataset.page;
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(`page-${pageId}`).classList.add('active');
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        closeMenuFn();
    });
});

// ========== SIP, EMI, BMI, AGE, STEP-UP functions ==========
window.calcSIP = function() {
    const P = parseFloat(document.getElementById('sipAmount').value);
    const r = parseFloat(document.getElementById('sipRate').value) / 100 / 12;
    const n = parseFloat(document.getElementById('sipYears').value) * 12;
    if (isNaN(P) || isNaN(r) || isNaN(n) || P <= 0 || r <= 0 || n <= 0) {
        alert('Please fill all fields with positive numbers');
        return;
    }
    const M = P * ((Math.pow(1 + r, n) - 1) / r) * (1 + r);
    const invested = P * n;
    const returns = M - invested;
    document.getElementById('sipResVal').innerText = '‚Çπ ' + M.toFixed(2);
    document.getElementById('sipResDetail').innerHTML =
        `Total Invested: ‚Çπ ${invested.toFixed(2)}<br>` +
        `Est. Returns: ‚Çπ ${returns.toFixed(2)}<br>` +
        `Maturity: ‚Çπ ${M.toFixed(2)}`;
    document.getElementById('sipResult').style.display = 'block';
};

window.calcStepUpSIP = function() {
    let P = parseFloat(document.getElementById('stepSipAmount').value);
    const inc = parseFloat(document.getElementById('stepSipIncrement').value) / 100;
    const r = parseFloat(document.getElementById('stepSipRate').value) / 100 / 12;
    const years = parseFloat(document.getElementById('stepSipYears').value);
    if (isNaN(P) || isNaN(inc) || isNaN(r) || isNaN(years) || P <= 0 || years <= 0) {
        alert('Please fill all fields with positive numbers');
        return;
    }
    let total = 0;
    let months = years * 12;
    for (let i = 0; i < months; i++) {
        total = total * (1 + r) + P;
        if ((i+1) % 12 === 0) P = P * (1 + inc);
    }
    const invested = P * months;
    const returns = total - invested;
    document.getElementById('stepSipResVal').innerText = '‚Çπ ' + total.toFixed(2);
    document.getElementById('stepSipResDetail').innerHTML =
        `Total Invested: approx ‚Çπ ${invested.toFixed(2)}<br>` +
        `Est. Returns: ‚Çπ ${returns.toFixed(2)}<br>` +
        `Maturity: ‚Çπ ${total.toFixed(2)}`;
    document.getElementById('stepSipResult').style.display = 'block';
};

window.calcEMI = function() {
    const P = parseFloat(document.getElementById('emiAmount').value);
    const r = parseFloat(document.getElementById('emiRate').value) / 100 / 12;
    const n = parseFloat(document.getElementById('emiMonths').value);
    if (isNaN(P) || isNaN(r) || isNaN(n) || P <= 0 || r <= 0 || n <= 0) {
        alert('Please fill all fields with positive numbers');
        return;
    }
    const emi = P * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
    const total = emi * n;
    const interest = total - P;
    document.getElementById('emiResVal').innerText = '‚Çπ ' + emi.toFixed(2);
    document.getElementById('emiResDetail').innerHTML =
        `Principal: ‚Çπ ${P.toFixed(2)}<br>` +
        `Total Interest: ‚Çπ ${interest.toFixed(2)}<br>` +
        `Total Payment: ‚Çπ ${total.toFixed(2)}`;
    document.getElementById('emiResult').style.display = 'block';
};

window.calcBMI = function() {
    const h = parseFloat(document.getElementById('bmiHeight').value) / 100;
    const w = parseFloat(document.getElementById('bmiWeight').value);
    if (isNaN(h) || isNaN(w) || h <= 0 || w <= 0) {
        alert('Please enter valid height and weight');
        return;
    }
    const bmi = w / (h * h);
    let cat = '';
    if (bmi < 18.5) cat = 'Underweight';
    else if (bmi < 25) cat = 'Normal weight';
    else if (bmi < 30) cat = 'Overweight';
    else cat = 'Obese';
    document.getElementById('bmiResVal').innerText = bmi.toFixed(1);
    document.getElementById('bmiResDetail').innerHTML = `Category: <strong>${cat}</strong>`;
    document.getElementById('bmiResult').style.display = 'block';
};

window.calcAge = function() {
    const dob = new Date(document.getElementById('dob').value);
    const asOn = document.getElementById('asOnDate').value ? new Date(document.getElementById('asOnDate').value) : new Date();
    if (isNaN(dob)) {
        alert('Please enter a valid date of birth');
        return;
    }
    let years = asOn.getFullYear() - dob.getFullYear();
    let months = asOn.getMonth() - dob.getMonth();
    let days = asOn.getDate() - dob.getDate();
    if (days < 0) {
        months--;
        days += new Date(asOn.getFullYear(), asOn.getMonth(), 0).getDate();
    }
    if (months < 0) {
        years--;
        months += 12;
    }
    document.getElementById('ageResVal').innerText = `${years} years, ${months} months, ${days} days`;
    document.getElementById('ageResDetail').innerHTML =
        `Total days: ${Math.floor((asOn - dob) / (1000*60*60*24))}`;
    document.getElementById('ageResult').style.display = 'block';
};

// ========== CONTACT MODAL ==========
const contactBtn = document.getElementById('contactBtn');
const contactModal = document.getElementById('contactModal');
const closeModal = document.getElementById('closeModal');

contactBtn.addEventListener('click', () => {
    contactModal.classList.add('show');
    closeMenuFn();
});
closeModal.addEventListener('click', () => {
    contactModal.classList.remove('show');
});
window.addEventListener('click', (e) => {
    if (e.target === contactModal) {
        contactModal.classList.remove('show');
    }
});

// ========== RATE & SHARE ==========
document.getElementById('rateBtn').addEventListener('click', () => {
    alert('Thank you for rating! (This would open Play Store/App Store)');
    closeMenuFn();
});
document.getElementById('shareBtn').addEventListener('click', () => {
    if (navigator.share) {
        navigator.share({
            title: 'FARDIP THAKRE Tools',
            text: 'Check out this awesome calculator and utility app!',
            url: window.location.href,
        });
    } else {
        alert('Share this app with your friends!');
    }
    closeMenuFn();
});

document.querySelectorAll('.tab-item').forEach(tab => {
    tab.addEventListener('click', () => {
        const pageId = tab.dataset.page;
        document.querySelectorAll('.page').forEach(p => {
            if (p.id !== 'page-' + pageId) p.classList.remove('active');
        });
    });
});

updateActiveThemeBtn(currentTheme);

if('serviceWorker' in navigator){
    window.addEventListener('load', function(){
        navigator.serviceWorker.register('/sw.js').catch(err => console.log('SW registration failed:', err));
    });
}
</script>
</body>
</html>
