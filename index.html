<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KEY FABRICS - Smart Business Tools</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0a0e1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="KEY FABRICS">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.12.0/math.min.js"></script>
    <style>
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        :root{
            --bg:#0a0e1a;--surface:#111827;--card:#151d2e;--card-alt:#1a2540;
            --input:#0c1220;--border:#253352;--border-light:#2e4068;
            --accent:#3b82f6;--accent-glow:rgba(59,130,246,.35);--accent-dim:#1e3a8a;
            --gold:#f59e0b;--gold-dim:#92400e;
            --teal:#14b8a6;--teal-dim:#0f766e;
            --rose:#f43f5e;--rose-dim:#9f1239;
            --text:#e2e8f0;--text-sec:#94a3b8;--text-dim:#64748b;
            --white:#ffffff;--shadow:rgba(0,0,0,.5);
            --success:#22c55e;--error:#ef4444;
            --radius:18px;--radius-sm:12px;--radius-btn:14px;
        }
        html{font-size:16px}
        body{
            background:var(--bg);min-height:100vh;min-height:100dvh;
            font-family:'Inter',system-ui,sans-serif;color:var(--text);
            display:flex;flex-direction:column;align-items:center;
            padding:0 0 80px 0;overflow-x:hidden;
        }

        /* ---- HEADER ---- */
        .header{
            width:100%;padding:18px 20px 14px;
            background:linear-gradient(180deg,rgba(17,24,39,.98) 0%,rgba(10,14,26,.95) 100%);
            text-align:center;position:sticky;top:0;z-index:100;
            border-bottom:1px solid var(--border);
            backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
        }
        .brand{font-size:1.6rem;font-weight:800;letter-spacing:2px;color:var(--gold)}
        .brand span{color:var(--text);font-weight:500;font-size:1rem;letter-spacing:0}
        .tagline{font-size:.75rem;color:var(--text-dim);margin-top:2px;letter-spacing:.5px}

        /* ---- BOTTOM TAB BAR ---- */
        .tab-bar{
            position:fixed;bottom:0;left:0;right:0;
            display:flex;justify-content:space-around;
            background:rgba(17,24,39,.96);
            border-top:1px solid var(--border);
            padding:6px 0 env(safe-area-inset-bottom,8px);
            backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
            z-index:200;
        }
        .tab-item{
            display:flex;flex-direction:column;align-items:center;gap:2px;
            padding:6px 8px;border-radius:10px;cursor:pointer;
            transition:.15s;flex:1;max-width:90px;
            background:transparent;border:none;color:var(--text-dim);font-family:inherit;
        }
        .tab-item.active{color:var(--accent)}
        .tab-item.active .tab-icon{background:var(--accent-glow);color:var(--white)}
        .tab-icon{
            width:36px;height:28px;border-radius:14px;
            display:flex;align-items:center;justify-content:center;
            font-size:1.1rem;transition:.2s;
        }
        .tab-label{font-size:.65rem;font-weight:600;letter-spacing:.3px}

        /* ---- MAIN CONTENT ---- */
        .main{width:100%;max-width:480px;padding:16px}
        .page{display:none}
        .page.active{display:block;animation:fadeUp .25s ease}
        @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

        /* ---- CALCULATOR ---- */
        .calc-display{
            background:var(--input);border-radius:var(--radius);
            padding:20px 18px;margin-bottom:14px;
            border:1px solid var(--border);
            min-height:110px;display:flex;flex-direction:column;justify-content:flex-end;
        }
        .calc-expr{
            font-size:1.05rem;color:var(--text-sec);text-align:right;
            min-height:24px;word-break:break-all;line-height:1.4;
        }
        .calc-result{
            font-size:2.6rem;font-weight:700;color:var(--text);
            text-align:right;word-break:break-all;
            text-shadow:0 0 20px var(--accent-glow);
            line-height:1.2;margin-top:4px;
        }
        .calc-grid{
            display:grid;grid-template-columns:repeat(4,1fr);gap:10px;
        }
        .calc-btn{
            background:var(--card);border:1px solid var(--border);
            color:var(--text);font-size:1.25rem;font-weight:600;
            padding:16px 0;border-radius:var(--radius-btn);cursor:pointer;
            transition:.1s;text-align:center;user-select:none;
            font-family:'Inter',sans-serif;
            box-shadow:0 4px 0 rgba(0,0,0,.3);
            position:relative;overflow:hidden;
        }
        .calc-btn:active{transform:translateY(3px);box-shadow:0 1px 0 rgba(0,0,0,.3)}
        .calc-btn.fn{background:var(--card-alt);color:var(--gold);font-size:1rem}
        .calc-btn.op{background:#1e3050;color:#fb923c}
        .calc-btn.eq{background:var(--accent);color:var(--white);font-weight:700}
        .calc-btn.ac{background:var(--rose-dim);color:var(--white)}
        .calc-btn.span2{grid-column:span 2}

        /* ---- SHARED FORM ELEMENTS ---- */
        .form-card{
            background:var(--card);border-radius:var(--radius);
            padding:20px;border:1px solid var(--border);margin-bottom:16px;
        }
        .form-title{
            font-size:1.05rem;font-weight:700;margin-bottom:14px;
            display:flex;align-items:center;gap:8px;
        }
        .form-label{color:var(--text-sec);font-size:.82rem;margin:12px 0 6px;font-weight:500}
        .form-input{
            width:100%;padding:13px 16px;
            background:var(--input);border:1px solid var(--border);
            color:var(--white);border-radius:var(--radius-sm);
            font-size:1rem;font-family:inherit;outline:none;
        }
        .form-select{
            width:100%;padding:13px 16px;
            background:var(--input);border:1px solid var(--border);
            color:var(--white);border-radius:var(--radius-sm);
            font-size:1rem;font-family:inherit;outline:none;
        }
        .form-btn{
            width:100%;padding:14px;border:none;border-radius:var(--radius-btn);
            font-size:1rem;font-weight:700;cursor:pointer;
            transition:.15s;margin-top:14px;
        }
        .form-btn.primary{background:var(--accent);color:var(--white)}
        .form-row{display:flex;gap:10px;align-items:flex-end}
        .form-row > *{flex:1}

        /* ---- RESULT BOX ---- */
        .result-box{
            background:var(--input);border-radius:var(--radius-sm);
            padding:16px;margin-top:14px;
            border-left:4px solid var(--accent);
            display:none;
        }
        .result-val{font-size:1.5rem;font-weight:700;color:var(--success)}
        .result-detail{font-size:.9rem;color:var(--text-sec);margin-top:6px}
    </style>
</head>
<body>

<header class="header">
    <div class="brand">KEY FABRICS <span>Tools</span></div>
    <div class="tagline">Smart Business Calculator & Utilities</div>
</header>

<div class="main">
    <div class="page active" id="page-calc">
        <div class="calc-display">
            <div class="calc-expr" id="calcExpr">0</div>
            <div class="calc-result" id="calcResult">0</div>
        </div>
        <div class="calc-grid" id="calcGrid">
            <button class="calc-btn ac" data-v="AC">AC</button>
            <button class="calc-btn fn" data-v="⌫">&#9003;</button>
            <button class="calc-btn fn" data-v="%">%</button>
            <button class="calc-btn op" data-v="/">&#247;</button>
            <button class="calc-btn" data-v="7">7</button>
            <button class="calc-btn" data-v="8">8</button>
            <button class="calc-btn" data-v="9">9</button>
            <button class="calc-btn op" data-v="*">&#215;</button>
            <button class="calc-btn" data-v="4">4</button>
            <button class="calc-btn" data-v="5">5</button>
            <button class="calc-btn" data-v="6">6</button>
            <button class="calc-btn op" data-v="-">&#8722;</button>
            <button class="calc-btn" data-v="1">1</button>
            <button class="calc-btn" data-v="2">2</button>
            <button class="calc-btn" data-v="3">3</button>
            <button class="calc-btn op" data-v="+">+</button>
            <button class="calc-btn" data-v="00">00</button>
            <button class="calc-btn" data-v="0">0</button>
            <button class="calc-btn" data-v=".">.</button>
            <button class="calc-btn eq" data-v="=">=</button>
        </div>
    </div>

    <div class="page" id="page-foam">
        <div class="form-card">
            <div class="form-title">Foam Comparison</div>
            <div class="form-row">
                <div><label class="form-label">Length (In)</label><input type="number" id="fL" class="form-input" value="72"></div>
                <div><label class="form-label">Width (In)</label><input type="number" id="fW" class="form-input" value="36"></div>
            </div>
            <div class="form-label">Density (D)</div>
            <input type="number" id="fD" class="form-input" value="32">
            
            <div class="form-label">Local Rate</div>
            <div class="form-row">
                <input type="number" id="rL" class="form-input" placeholder="Rate">
                <select id="uL" class="form-select"><option value="kg">KG</option><option value="mm">MM</option></select>
            </div>
            
            <div class="form-label">Branded Rate</div>
            <div class="form-row">
                <input type="number" id="rB" class="form-input" placeholder="Rate">
                <select id="uB" class="form-select"><option value="mm">MM</option><option value="kg">KG</option></select>
            </div>
            
            <button class="form-btn primary" onclick="doCompare()">Compare Now</button>
            
            <div class="result-box" id="fRes">
                <div class="result-val" id="fVal"></div>
                <div class="result-detail" id="fDet"></div>
            </div>
        </div>
    </div>
</div>

<nav class="tab-bar">
    <button class="tab-item active" onclick="nav('calc', this)"><div class="tab-label">Calculator</div></button>
    <button class="tab-item" onclick="nav('foam', this)"><div class="tab-label">Foam Compare</div></button>
</nav>

<script>
    // Navigation Logic
    function nav(p, btn) {
        document.querySelectorAll('.page').forEach(pg => pg.classList.remove('active'));
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        document.getElementById('page-' + p).classList.add('active');
        btn.classList.add('active');
    }

    // Calculator Logic
    let expr = '';
    const resEl = document.getElementById('calcResult');
    const exprEl = document.getElementById('calcExpr');

    document.querySelectorAll('.calc-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const v = btn.dataset.v;
            if(v === 'AC') { expr = ''; resEl.innerText = '0'; }
            else if(v === '⌫') { expr = expr.slice(0, -1); }
            else if(v === '=') {
                try { resEl.innerText = math.evaluate(expr.replace('×','*').replace('÷','/')); }
                catch(e) { resEl.innerText = 'Error'; }
            } else { expr += v; }
            exprEl.innerText = expr || '0';
        });
    });

    // Foam Logic
    function doCompare() {
        let l = parseFloat(document.getElementById('fL').value) * 25.4;
        let w = parseFloat(document.getElementById('fW').value) * 25.4;
        let d = parseFloat(document.getElementById('fD').value);
        let weight1mm = (l * w * 1 * d) / 1000000000;
        
        let rateL = parseFloat(document.getElementById('rL').value);
        let rateB = parseFloat(document.getElementById('rB').value);
        let unitL = document.getElementById('uL').value;
        let unitB = document.getElementById('uB').value;

        let finalL = (unitL === 'kg') ? rateL * weight1mm : rateL;
        let finalB = (unitB === 'mm') ? rateB : rateB * weight1mm;

        document.getElementById('fRes').style.display = 'block';
        document.getElementById('fVal').innerText = "Difference: ₹" + Math.abs(finalL - finalB).toFixed(2);
        document.getElementById('fDet').innerHTML = "Local (MM): ₹" + finalL.toFixed(2) + "<br>Brand (MM): ₹" + finalB.toFixed(2);
    }
</script>
</body>
</html>
